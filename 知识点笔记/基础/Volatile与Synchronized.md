# 1.Synchronized的内存语义

- 内存语义可以解决内存可见性问题

- 进入synchronized的块内使用该变量前会把变量从工作空间中删除，进入时会从主内存中获取

- 退出synchronized的块时，会将对共享变量的修改更新到主内存中

- 这也是加锁和释放锁的语义，进入synchronized块和退出synchronized块分别是加锁和释放锁

# 2.Volatile的内存语义
- 使用锁的问题：使用synchronized锁太重，因为它会引起线程上下文的切换开销

- 变量声明为volatile关键字，线程写入变量的时候不会把值缓存在寄存器或者其他地方，而是会把
值刷新会主内存

- 非阻塞关键字，解决共享变量的可见性问题，不能保证原子性操作

- 确保对一个变量的更新对其他线程马上可见

- 使用volatile的情况：
（1）当写入变量的值不依赖于变量的当前值；因为如果依赖当前值则是获取-计算-写入操作，这三步
操作不是原子性的，而volatile不能保证原子性

（2）读写变量值的时候没有进行加锁；加锁已经保证了内存的可见性，不需要把变量声明为volatile

