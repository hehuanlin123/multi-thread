# 1.查看Java进程与线程

- 进程是 代码+数据集合，是代码在数据集合上的运行活动

- 操作系统是以进程为基本单位进行资源分配和调度的，但是CPU这个资源却是以线程为基本单位进行资源分配和调度的

- 一个main函数会开启一个JVM进程，一个JVM进程里面会有很多个gc线程

- 查看进程的存在
```
ps -eaf | grep java
```
- 查看线程
```
jstack pid
```

# 2.进程与线程原理
- 多个线程共享进程的堆（heap）和方法区（method area）资源
(1)堆是进程中最大的一块内存，是进程创建时创建的，被进程中所有的线程共享。堆主要存放new操作创建的对象实例，而指向创建
的对象的变量本身是在线程的栈区域保存的，变量的值是指向创建的对象的地址

(2)方法区存放的是JVM加载的【类信息】，【常量】，【静态变量】等信息，也是线程所共享的

- 每个线程有自己的程序计数器（PC）和栈区域（stack）
(1)PC计数器本质上是一块内存区域，用来记录线程当前要执行的指令地址（一个），CPU是使用时间片轮转方式让线程轮询占用的，
当前线程CPU时间片用完后，要让出CPU，这时PC计数器会记录下次要执行的命令地址，下次轮到该线程占用CPU时，就会取出将要
执行的命令继续执行

(2)每个线程有自己的栈资源，用于存储该线程的局部变量，这些局部变量时该线程私有的，其他线程访问不了；调用的方法放到栈
顶，成为活跃栈帧，调用完成后，会出栈

- JVM 整体组成可分为以下四个部分：
类加载器（ClassLoader）
运行时数据区（Runtime Data Area）
执行引擎（Execution Engine）
本地库接口（Native Interface）

- 各个组成部分的用途：
程序在执行之前先要把java代码转换成字节码（class文件），jvm首先需要把字节码通过一定的方式 类加载器（ClassLoader）
把文件加载到内存中 运行时数据区（Runtime Data Area） ，而字节码文件是jvm的一套指令集规范，并不能直接交个底层操作
系统去执行，因此需要特定的命令解析器 执行引擎（Execution Engine） 将字节码翻译成底层系统指令再交由CPU去执行，而
这个过程中需要调用其他语言的接口 本地库接口（Native Interface）来实现整个程序的功能，这就是这4个主要组成部分的职
责与功能。

而我们通常所说的jvm组成指的是运行时数据区（Runtime Data Area），因为通常需要程序员调试分析的区域就是“运行时数据区”，
或者更具体的来说就是“运行时数据区”里面的Heap（堆）模块，那接下来我们来看运行时数据区（Runtime Data Area）是由哪些
模块组成的。

- 运行时数据区组成
jvm的运行时数据区，不同虚拟机实现可能略微有所不同，但都会遵从Java虚拟机规范，Java 8 虚拟机规范规定，Java虚拟机所管
理的内存将会包括以下几个运行时数据区域：
程序计数器（Program Counter Register）
Java虚拟机栈（Java Virtual Machine Stacks）
本地方法栈（Native Method Stack）
Java堆（Java Heap）
方法区（Methed Area）

# 3.创建线程的两种方法
- 实现Runnable()接口

- 继承Thread类并重写run方法

# 4.守护线程daemon和用户线程User
- 默认创建的线程都是User线程，当Java的进程中不存在任何User线程时，JVM就会退出
